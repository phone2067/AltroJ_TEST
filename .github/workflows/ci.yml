name: Simulated CI/CD Pipeline

on:
  push:
    branches: [ master ]

jobs:
  ci-cd:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“… Checkout Repository
        uses: actions/checkout@v3

      - name: â³ Wait before build
        run: sleep 2

      - name: ğŸ— Build Step (simulated)
        run: |
          echo "Building the project..."
          sleep 1
          echo "."
          sleep 1
          echo ".."
          sleep 1
          echo "..."
          sleep 1
          echo "âœ… Build successful!"

      - name: â³ Wait before test
        run: sleep 2

      - name: ğŸ§ª Run Tests (simulated)
        run: |
          echo "Running tests..."
          sleep 1
          echo "Test 1: âœ…"
          sleep 1
          echo "Test 2: âœ…"
          sleep 1
          echo "Test 3: âœ…"
          echo "âœ… All tests passed!"

      - name: â³ Wait before deploy
        run: sleep 2

      - name: ğŸš€ Deploy (simulated)
        run: |
          echo "Deploying to staging..."
          sleep 1
          echo "."
          sleep 1
          echo ".."
          sleep 1
          echo "..."
          sleep 1
          echo "âœ… Deployed successfully!"

      - name: â³ Wait before API call
        run: sleep 2

      - name: ğŸŒ Call External API
        run: |
          echo "Calling external deployment API..."
          sleep 1
          curl -X POST https://httpbin.org/post \
            -H "Content-Type: application/json" \
            -d '{"status": "success", "message": "CI/CD finished!", "repo": "${{ github.repository }}"}'
          echo "âœ… API call completed"

      - name: â³ Wait before notification
        run: sleep 2

      - name: ğŸ“¢ Notify (simulated)
        run: |
          echo "Sending CI/CD completion notification..."
          sleep 1
          echo "ğŸ“¢ Notification sent: CI/CD pipeline for ${{ github.repository }} completed successfully."

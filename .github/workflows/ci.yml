name: Simulated CI/CD Pipeline

on:
  push:
    branches: [ master ]

jobs:
  ci-cd:
    runs-on: ubuntu-latest

    steps:
      - name: üìÖ Checkout Repository
        uses: actions/checkout@v3

      - name: ‚è≥ Wait before build
        run: sleep 2

      - name: üèó Build Step (simulated)
        run: |
          echo "Building the project..."
          sleep 1
          echo "."
          sleep 1
          echo ".."
          sleep 1
          echo "..."
          sleep 1
          echo "‚úÖ Build successful!"

      - name: ‚è≥ Wait before test
        run: sleep 2

      - name: üß™ Run Tests (simulated)
        run: |
          echo "Running tests..."
          sleep 1
          echo "Test 1: ‚úÖ"
          sleep 1
          echo "Test 2: ‚úÖ"
          sleep 1
          echo "Test 3: ‚úÖ"
          echo "‚úÖ All tests passed!"

      - name: ‚è≥ Wait before deploy
        run: sleep 2

      - name: üöÄ Deploy (simulated)
        run: |
          echo "Deploying to staging..."
          sleep 1
          echo "."
          sleep 1
          echo ".."
          sleep 1
          echo "..."
          sleep 1
          echo "‚úÖ Deployed successfully!"

      - name: ‚è≥ Wait before notification
        run: sleep 2

      - name: üì¢ Notify (simulated)
        run: |
          echo "Sending CI/CD completion notification..."
          sleep 1
          echo "üì¢ Notification sent: CI/CD pipeline for ${{ github.repository }} completed successfully."
          
  dast-scan:
    needs: ci-cd
    uses: ./.github/workflows/ASOC_DAST_SCAN.yml
    secrets:
      ASOC_KEY: ${{ secrets.ASOC_KEY }}
      ASOC_SECRET: ${{ secrets.ASOC_SECRET }}

    #uses: ./.github/workflows/AppScanSTD_DAST_SCAN_runner.yml
    #uses: ./.github/workflows/AppScanSTD_DAST_SCAN_ssh.yml
    #secrets:
    #    WIN_SERVER_IP: ${{ secrets.WIN_SERVER_IP }}
    #    WIN_USER: ${{ secrets.WIN_USER }} 
    #    WIN_PASS: ${{ secrets.WIN_PASS }} 
        
